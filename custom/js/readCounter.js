function addCounter(e){(new(AV.Object.extend("Counter"))).save({path:e,number:1})}function updateCounter(e,t){AV.Object.createWithoutData("Counter",e.get("objectId")).save({number:t})}function getCounter(e){var t=new AV.Query("Counter");"/"!=e&&-1==e.indexOf("/page/")&&t.equalTo("path",e);var n=document.getElementsByClassName("leancloud-visitors-count");t.find().then(function(t){t.length>0?(t.forEach(function(t){for(var u=0;u<n.length;u++)n[u].id==""+t.get("path")&&("/"==e||-1!=e.indexOf("/page/")?document.getElementById(""+t.get("path")).innerHTML=""+t.get("number"):document.getElementById(""+t.get("path")).innerHTML=""+(t.get("number")+1))}),1==t.length&&updateCounter(t[0],t[0].get("number")+1)):"/"!=e&&(addCounter(e),document.getElementById(""+e).innerHTML=1)})}$(function(){getCounter(window.location.pathname)});